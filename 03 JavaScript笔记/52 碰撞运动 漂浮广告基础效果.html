<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>52 碰撞运动 漂浮广告基础效果</title>
    
    <!--<style type="text/css">
    	* {
    		padding: 0;
    		margin: 0;
    	}
    	#body {
    		width: 100%;
    		height: 900px;
    		position: relative;
    	}
    	#box {
    		width: 300px;
    		height: 200px;
    		background: palevioletred;
    		position: absolute;
    		top: 0;
    		left: 0;
    	}
    	
    </style>
    
    <script type="text/javascript">
    	
    	window.onload = function(){
    		
//  		抓元素
			var body = document.getElementById('body');
    		var box = document.getElementById('box');
    		var timer;
    		var t = 1,
    			l = 1;

				timer = setInterval(function(){
	    			
	    			var oldTop = box.offsetTop,
	    				oldLeft = box.offsetLeft;
	    			var newTop = oldTop + t,
	    				newLeft = oldLeft +l;
	    			box.style.top = newTop + 'px';
	    			box.style.left = newLeft + 'px';
	    			
	    			var bHeight = body.offsetHeight - 200,
	    				bWidth = body.offsetWidth - 300;
	    			
	    			if(newTop==bHeight || newTop==0){
	    				t = t*-1;
	    			}else if(newLeft==bWidth || newLeft==0){
	    				l = l*-1;
	    			}
	    		},10);			
			
//  		给div加鼠标移入事件
    		box.onmouseout = function(){
    			clearInterval(timer);
//  			设置定时器
	    		timer = setInterval(function(){
	    			
	    			var oldTop = box.offsetTop,
	    				oldLeft = box.offsetLeft;
	    			var newTop = oldTop + t,
	    				newLeft = oldLeft +l;
	    			box.style.top = newTop + 'px';
	    			box.style.left = newLeft + 'px';
	    			
	    			var bHeight = body.offsetHeight - 200,
	    				bWidth = body.offsetWidth - 300;
	    			
	    			if(newTop==bHeight || newTop==0){
	    				t = t*-1;
	    			}else if(newLeft==bWidth || newLeft==0){
	    				l = l*-1;
	    			}
	    		},10);	
    			
    		}
//  		给div加鼠标移出事件
    		box.onmouseover = function(){
    			
//  			清理定时器
    			clearInterval(timer);
    			
    		}
    		
    		
    		
    	}
    	
    </script>-->
    
    <style type="text/css">
    	
    	* {
    		padding: 0;
    		margin: 0;
    	}
    	#ad {
    		width: 300px;
    		height: 200px;
    		/*border: 1px solid palevioletred;*/
    		background: orangered;
    		position: absolute;
    		top: 0;
    		left: 0;
    	}
    	#close {
    		width: 40px;
    		height: 15px;
    		background: #222;
    		color: #fff;
    		line-height: 10px;
    		text-align: center;
    		cursor: pointer;
    	}
    	
    </style>
    
    <script type="text/javascript">
    	
//  	漂浮广告
		window.onload = function(){
			
//			抓元素
			var ad = document.getElementById('ad');
			var close = document.getElementById('close');
			
//			获得可视区域的宽高
			var win_height = document.documentElement.clientHeight;
			var win_width = document.documentElement.clientWidth;
			
//			计算可以达到的最大的top和left值
			var max_top = win_height-ad.offsetHeight;
			var max_left = win_width-ad.offsetWidth;
			
			var x=1,y=1;
			
//			设置定时器,每个一段时间就改变一下left和top
			var timer = setInterval(function(){
				
//				获得旧的left和top值
				var old_left = ad.offsetLeft;
				var old_top = ad.offsetTop;
				
//				计算新的left和top值
				var new_left = old_left+x;
				var new_top = old_top+y;
				
//				将新值赋值回去
				ad.style.left = new_left+'px';
				ad.style.top = new_top+'px';
				
				if(new_left==max_left || new_left==0){
					
					x = x*-1;
					
				}else if(new_top==max_top || new_top==0){
					
					y = y*-1;
					
				}
				
			},10);
			
		}
    	
    </script>
	
</head>
<body>
	
	<!--<div id="body">
		<div id="box"></div>
	</div>	-->
	
	<div id="ad">
		<div id="close">x</div>
	</div>
	
</body>
</html>